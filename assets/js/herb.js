const firebaseConfig={ apiKey:"AIzaSyBRN5PnCCkUZwcIQcH7v6HiE3S2p474wN8", authDomain:"trst-7237c.firebaseapp.com", projectId:"trst-7237c", storageBucket:"trst-7237c.appspot.com", messagingSenderId:"170480411329", appId:"170480411329" }; firebase.initializeApp(firebaseConfig); const auth=firebase.auth(); const authLoading=document.getElementById('auth-loading'); auth.onAuthStateChanged((user) => { if (user) { authLoading.style.display='none'; document.querySelector('.container').style.display='block'; initApp(); } else { authLoading.querySelector('.auth-message').innerHTML='<div class="auth-error">Authentication required. Redirecting to login...</div>'; setTimeout(() => { window.location.href='index.html'; }, 2000); } }); function initApp() { const herbs=[ { id:1, name:"Mint", icon:"seedling", description:"Refreshing and cool, great for teas, desserts, and cocktails." }, { id:2, name:"Basil", icon:"seedling", description:"Sweet and aromatic, perfect for pesto, Italian dishes, and salads." }, { id:3, name:"Chives", icon:"seedling", description:"Mild onion flavor, excellent for garnishing potatoes, soups, and dips." }, { id:4, name:"Coriander", icon:"seedling", description:"Fresh citrusy flavor, essential for Mexican, Asian, and Indian cuisines." }, { id:5, name:"Dill", icon:"seedling", description:"Delicate and tangy, perfect for pickling, fish dishes, and salads." }, { id:6, name:"Lovage", icon:"seedling", description:"Celery-like flavor with a hint of parsley, great for soups and stews." }, { id:7, name:"Flat Parsley", icon:"seedling", description:"Mild and versatile, ideal for garnishing and Mediterranean dishes." }, { id:8, name:"Sorrel", icon:"seedling", description:"Tangy lemon flavor, perfect for soups, sauces, and fresh salads." }, { id:9, name:"Garlic", icon:"seedling", description:"Pungent and aromatic, fundamental in countless global cuisines." }, { id:10, name:"Turmeric", icon:"seedling", description:"Earthy and warm, known for its vibrant color and health benefits." }, { id:11, name:"Rosemary", icon:"seedling", description:"Woody and fragrant, excellent for roasted meats and potatoes." }, { id:12, name:"Thyme", icon:"seedling", description:"Subtle earthy flavor, pairs well with poultry, vegetables, and stews." }, { id:13, name:"Sage", icon:"seedling", description:"Earthy and savory, ideal for stuffing, sausages, and rich sauces." }, { id:14, name:"Tarragon", icon:"seedling", description:"Anise-like flavor, perfect for chicken, fish, and creamy sauces." }, { id:15, name:"Peeled Garlic 1KG", icon:"seedling", description:"Convenient pre-peeled garlic for bulk cooking and processing." }, { id:16, name:"Edible Flowers", icon:"seedling", description:"Colorful and flavorful, used to garnish salads, desserts, and drinks." }, { id:17, name:"Micro Coriander", icon:"seedling", description:"Tiny coriander leaves with intense flavor, perfect garnish." }, { id:18, name:"Micro Red Amaranth", icon:"seedling", description:"Vibrant microgreens with a mild, earthy taste and color pop." }, { id:19, name:"Micro Fennel", icon:"seedling", description:"Delicate fennel fronds with a light anise flavor." }, { id:20, name:"Micro Garlic", icon:"seedling", description:"Microgreen version of garlic with a mild garlicky essence." }, { id:21, name:"Micro Lemon Balm", icon:"seedling", description:"Small citrusy leaves perfect for desserts and teas." }, { id:22, name:"Micro Red Vein Sorrel", icon:"seedling", description:"Tangy microgreens with beautiful red veins and lemony taste." } ]; const herbList=document.getElementById('herbList'); const reportModal=document.getElementById('reportModal'); const closeModal=document.getElementById('closeModal'); const cancelBtn=document.getElementById('cancelBtn'); const generateReport=document.getElementById('generateReport'); const sendEmailBtn=document.getElementById('sendEmailBtn'); const sendAllBtn=document.getElementById('sendAllBtn'); const reportList=document.getElementById('reportList'); const emailForm=document.getElementById('emailForm'); const searchInput=document.getElementById('searchInput'); const notification=document.getElementById('notification'); function renderHerbList(herbsArray=herbs) { herbList.innerHTML=''; herbsArray.forEach(herb => { const herbCard=document.createElement('div'); herbCard.className='herb-card'; herbCard.innerHTML=`<div class="herb-header"><h3 class="herb-name"><i class="fas fa-${herb.icon} herb-icon"></i>${herb.name}</h3><div class="herb-id">ID:${herb.id}</div></div><div class="herb-info"><p class="herb-description">${herb.description}</p><div class="quantity-control"><span class="quantity-label">Boxes:</span><input type="number" min="0" class="quantity-input" id="herb-${herb.id}" placeholder="Enter amount"></div></div>`; herbList.appendChild(herbCard); }); } renderHerbList(); searchInput.addEventListener('input', (e) => { const searchTerm=e.target.value.toLowerCase(); const filteredHerbs=herbs.filter(herb => herb.name.toLowerCase().includes(searchTerm)||herb.description.toLowerCase().includes(searchTerm) ); renderHerbList(filteredHerbs); }); function showReport() { reportList.innerHTML=''; herbs.forEach(herb => { const input=document.getElementById(`herb-${herb.id}`); let quantity='N/A'; let quantityClass=''; if (input&&input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { if (value===0) { quantity='0'; quantityClass='quantity-zero'; } else { quantity=value===1?'1 box':`${value} boxes`; } } } const reportItem=document.createElement('li'); reportItem.className='report-item'; reportItem.innerHTML=`<span class="report-herb">${herb.name}</span><span class="report-quantity ${quantityClass}">${quantity}</span>`; reportList.appendChild(reportItem); }); reportModal.classList.add('show'); } generateReport.addEventListener('click', showReport); sendAllBtn.addEventListener('click', showReport); const closeModalFunc=() => { reportModal.classList.remove('show'); }; closeModal.addEventListener('click', closeModalFunc); cancelBtn.addEventListener('click', closeModalFunc); function getInventoryList() { let inventoryList=""; herbs.forEach(herb => { const input=document.getElementById(`herb-${herb.id}`); let quantity='N/A'; if (input&&input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { quantity=value===0?'0':(value===1?'1 box':`${value} boxes`); } } inventoryList += `${herb.name}:${quantity}\n`; }); return inventoryList; } sendEmailBtn.addEventListener('click', (e) => { e.preventDefault(); if (emailForm.checkValidity()) { const email=document.getElementById('email').value; const subject=document.getElementById('subject').value; const message=document.getElementById('message').value; const inventoryList=getInventoryList(); const emailBody=encodeURIComponent( `${message}\n\n`+"HERB INVENTORY REPORT:\n"+"========================\n\n"+inventoryList ); const mailtoLink=`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${emailBody}`; notification.classList.add('show'); setTimeout(() => { notification.classList.remove('show'); }, 3000); window.location.href=mailtoLink; setTimeout(closeModalFunc, 500); } else { alert('Please enter a valid email address'); } }); reportModal.addEventListener('click', (e) => { if (e.target===reportModal) { closeModalFunc(); } }); }