const firebaseConfig={ apiKey:"AIzaSyBRN5PnCCkUZwcIQcH7v6HiE3S2p474wN8", authDomain:"trst-7237c.firebaseapp.com", projectId:"trst-7237c", storageBucket:"trst-7237c.appspot.com", messagingSenderId:"170480411329", appId:"170480411329" }; firebase.initializeApp(firebaseConfig); const auth=firebase.auth(); const authLoading=document.getElementById('auth-loading'); auth.onAuthStateChanged((user) => { if (user) { authLoading.style.display='none'; document.querySelector('.container').style.display='block'; initApp(); } else { authLoading.querySelector('.auth-message').innerHTML='<div class="auth-error">Authentication required. Redirecting to login...</div>'; setTimeout(() => { window.location.href='index.html'; }, 2000); } }); function initApp() { const fruits=[ { id:1, name:"Apple-Bramley", icon:"apple-whole", description:"Traditional cooking apples perfect for pies and sauces." }, { id:2, name:"Apple-Golden Delicious", icon:"apple-whole", description:"Sweet, crisp apples with a golden-yellow skin." }, { id:3, name:"Apple-Pink lady", icon:"apple-whole", description:"Crisp texture with a perfect sweet-tart balance." }, { id:4, name:"Apple-Granny Smiths", icon:"apple-whole", description:"Tangy green apples ideal for baking and snacking." }, { id:5, name:"Apple-Polish", icon:"apple-whole", description:"Traditional Polish apple variety with rich flavor." }, { id:6, name:"Apple-Red Chief", icon:"apple-whole", description:"Deep red apples with sweet, firm flesh." }, { id:7, name:"Apple-Braeburn", icon:"apple-whole", description:"Crisp texture with balanced sweet-tart flavor." }, { id:8, name:"Apple-Custard", icon:"apple-whole", description:"Creamy textured apples with custard-like flavor." }, { id:9, name:"Apple-Gala", icon:"apple-whole", description:"Sweet, aromatic apples with thin skin." }, { id:10, name:"Apple-Rubis Gold", icon:"apple-whole", description:"Golden apples with a ruby blush and crisp texture." }, { id:11, name:"Apple-Red Joya Crisp", icon:"apple-whole", description:"Exceptionally crisp and juicy red apples." }, { id:12, name:"Apple-Chocolate x20", icon:"apple-whole", description:"Apple with chocolate coating-20 pack." }, { id:13, name:"Apple-Toffee x20", icon:"apple-whole", description:"Toffee-coated apples-20 pack." }, { id:14, name:"Conference Pear", icon:"apple-whole", description:"Classic pear with long neck and sweet flavor." }, { id:15, name:"Asian White Pear", icon:"apple-whole", description:"Crisp, juicy pears with pale yellow skin." }, { id:16, name:"Forelle Pears", icon:"apple-whole", description:"Small, sweet pears with distinctive red speckling." }, { id:17, name:"Bananas", icon:"apple-whole", description:"Rich in potassium, great for smoothies and snacks." }, { id:18, name:"Blackberries", icon:"apple-whole", description:"Dark, juicy berries with sweet-tart flavor." }, { id:19, name:"Raspberries", icon:"apple-whole", description:"Delicate and tart, perfect for jams and desserts." }, { id:20, name:"Blueberries", icon:"apple-whole", description:"Antioxidant-rich, great for muffins and smoothies." }, { id:21, name:"Lemons", icon:"apple-whole", description:"Tart and zesty, essential for cooking and beverages." }, { id:22, name:"Limes", icon:"apple-whole", description:"Tangy citrus perfect for drinks and marinades." }, { id:23, name:"Nectarines", icon:"apple-whole", description:"Smooth-skinned stone fruit with sweet flavor." }, { id:24, name:"Mango", icon:"apple-whole", description:"Creamy and sweet, excellent in smoothies and salsas." }, { id:25, name:"Melon Galia", icon:"apple-whole", description:"Sweet green-fleshed melon with tropical aroma." }, { id:26, name:"Melon Cantaloupe", icon:"apple-whole", description:"Orange-fleshed melon with netted rind." }, { id:27, name:"Melon Honeydew", icon:"apple-whole", description:"Pale green, sweet melon with smooth rind." }, { id:28, name:"Melon Limelon", icon:"apple-whole", description:"Hybrid fruit with lemon-melon characteristics." }, { id:29, name:"Pineapple", icon:"apple-whole", description:"Tropical and sweet, great for juices and grilling." }, { id:30, name:"Coconut", icon:"apple-whole", description:"Tropical fruit with refreshing water and meat." }, { id:31, name:"Passion Fruit", icon:"apple-whole", description:"Tropical fruit with aromatic, seedy pulp." }, { id:32, name:"Grapefruit (White)", icon:"apple-whole", description:"Tangy citrus with pale yellow flesh." }, { id:33, name:"Grapefruit (Pink)", icon:"apple-whole", description:"Rosy-colored flesh with balanced tartness." }, { id:34, name:"Grapefruit (Jaffa Sweetie)", icon:"apple-whole", description:"Large, sweet grapefruit variety." }, { id:35, name:"Oranges-Large", icon:"apple-whole", description:"Juicy citrus fruit, large size." }, { id:36, name:"Oranges-Medium", icon:"apple-whole", description:"Juicy citrus fruit, medium size." }, { id:37, name:"Blood Oranges", icon:"apple-whole", description:"Citrus with deep red flesh and berry notes." }, { id:38, name:"Leafy Clementine's", icon:"apple-whole", description:"Sweet, easy-peel citrus with leaves attached." }, { id:39, name:"Clementines", icon:"apple-whole", description:"Small, sweet, easy-to-peel citrus fruits." }, { id:40, name:"Nadorcotts Easy Peelers", icon:"apple-whole", description:"Seedless, easy-to-peel citrus fruits." }, { id:41, name:"Kumquat", icon:"apple-whole", description:"Small citrus fruits eaten whole, skin included." }, { id:42, name:"Pomelo (Honey)", icon:"apple-whole", description:"Large citrus with sweet honey flavor." }, { id:43, name:"Pomelo (Red)", icon:"apple-whole", description:"Large citrus with pink flesh and mild taste." }, { id:44, name:"Grapes-Globe Red (Seeded)", icon:"apple-whole", description:"Large SEEDED red grapes sold by KG." }, { id:45, name:"Grapes-Red (Seedless) KG", icon:"apple-whole", description:"Sweet SEEDLESS red grapes. sold by KG" }, { id:46, name:"Grapes-Red (Seedless)", icon:"apple-whole", description:"Crisp Red SEEDLESS grapes. sold by Punnet" }, { id:47, name:"Grapes-Green (Seeded)", icon:"apple-whole", description:"Crisp SEEDED green grapes. sold by KG" }, { id:48, name:"Grapes-Green (Seedless) KG", icon:"apple-whole", description:"SEEDLESS green grapes sold by KG" }, { id:49, name:"Grapes-Green (Seedless)", icon:"apple-whole", description:"Crisp SEEDLESS green grapes. sold by Punnet" }, { id:50, name:"Grapes-Mix (Seedless)", icon:"apple-whole", description:"Assorted SEEDLESS grapes mixture. sold by Punnet" }, { id:51, name:"Peach", icon:"apple-whole", description:"Fuzzy-skinned stone fruit with sweet flesh." }, { id:52, name:"Plums", icon:"apple-whole", description:"Juicy stone fruits with smooth skin." }, { id:53, name:"Kiwi", icon:"apple-whole", description:"Fuzzy brown fruit with vibrant green flesh." }, { id:54, name:"Physalis", icon:"apple-whole", description:"Small golden berries in papery husks." }, { id:55, name:"Avocado", icon:"apple-whole", description:"Creamy and nutritious, perfect for guacamole." }, { id:56, name:"Watermelon", icon:"apple-whole", description:"Large, sweet watermelon sold by kg." }, { id:57, name:"Yellow Watermelon", icon:"apple-whole", description:"Yellow-fleshed watermelon sold by kg." }, { id:58, name:"Lychees", icon:"apple-whole", description:"Tropical fruit with floral fragrance." }, { id:59, name:"Dragon Fruit", icon:"apple-whole", description:"Vibrant pink fruit with white flesh and seeds." }, { id:60, name:"Cherries", icon:"apple-whole", description:"Sweet or tart, great for baking and fresh eating." }, { id:61, name:"Quince", icon:"apple-whole", description:"Fragrant fruit used in preserves and cooking." }, { id:62, name:"Rhubarb", icon:"apple-whole", description:"Tart stalks often used in pies and desserts." }, { id:63, name:"Apricot", icon:"apple-whole", description:"Small golden-orange stone fruits." }, { id:64, name:"Gooseberries", icon:"apple-whole", description:"Tart green berries used in desserts." }, { id:65, name:"Gooseberries (Pink)", icon:"apple-whole", description:"Pink variety of tart gooseberries." }, { id:66, name:"Papaya", icon:"apple-whole", description:"Tropical fruit with orange flesh and black seeds." }, { id:67, name:"Pomegranates", icon:"apple-whole", description:"Jewel-like seeds bursting with tart juice." }, { id:68, name:"Red Currents", icon:"apple-whole", description:"Tiny tart berries growing in clusters." }, { id:69, name:"Strawberries Large Punnet", icon:"apple-whole", description:"Large strawberries in punnets, 500g" }, { id:70, name:"Figs", icon:"apple-whole", description:"Sweet fruits with soft flesh and tiny seeds." }, { id:71, name:"Flat Peaches", icon:"apple-whole", description:"Saucer-shaped peaches with sweet flavor." }, { id:72, name:"Coconut Drink", icon:"apple-whole", description:"Refreshing coconut water beverage." }, { id:73, name:"Cranberries Fresh", icon:"apple-whole", description:"Fresh tart cranberries." }, { id:74, name:"Cranberries Bags", icon:"apple-whole", description:"Tart red berries sold in bags." }, { id:75, name:"Persimmon", icon:"apple-whole", description:"Sweet orange fruit sold individually." }, { id:76, name:"Pink Lemons", icon:"apple-whole", description:"Variegated lemons with pink flesh." }, { id:77, name:"Kiwi Berry", icon:"apple-whole", description:"Small, smooth-skinned kiwi variety." } ]; const fruitList=document.getElementById('fruitList'); const reportModal=document.getElementById('reportModal'); const closeModal=document.getElementById('closeModal'); const cancelBtn=document.getElementById('cancelBtn'); const generateReport=document.getElementById('generateReport'); const sendEmailBtn=document.getElementById('sendEmailBtn'); const sendAllBtn=document.getElementById('sendAllBtn'); const reportList=document.getElementById('reportList'); const emailForm=document.getElementById('emailForm'); const searchInput=document.getElementById('searchInput'); const notification=document.getElementById('notification'); function renderFruitList(fruitsArray=fruits) { fruitList.innerHTML=''; fruitsArray.forEach(fruit => { const fruitCard=document.createElement('div'); fruitCard.className='fruit-card'; fruitCard.innerHTML=`<div class="fruit-header"><h3 class="fruit-name"><i class="fas fa-${fruit.icon} fruit-icon"></i>${fruit.name}</h3><div class="fruit-id">ID:${fruit.id}</div></div><div class="fruit-info"><p class="fruit-description">${fruit.description}</p><div class="quantity-control"><span class="quantity-label">Boxes:</span><input type="number" min="0" class="quantity-input" id="fruit-${fruit.id}" placeholder="Enter amount"></div></div>`; fruitList.appendChild(fruitCard); }); } renderFruitList(); searchInput.addEventListener('input', (e) => { const searchTerm=e.target.value.toLowerCase(); const filteredFruits=fruits.filter(fruit => fruit.name.toLowerCase().includes(searchTerm)||fruit.description.toLowerCase().includes(searchTerm) ); renderFruitList(filteredFruits); }); function showReport() { reportList.innerHTML=''; fruits.forEach(fruit => { const input=document.getElementById(`fruit-${fruit.id}`); let quantity='N/A'; let quantityClass=''; if (input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { if (value===0) { quantity='0'; quantityClass='quantity-zero'; } else { quantity=value===1?'1 box':`${value} boxes`; } } } const reportItem=document.createElement('li'); reportItem.className='report-item'; reportItem.innerHTML=`<span class="report-fruit">${fruit.name}</span><span class="report-quantity ${quantityClass}">${quantity}</span>`; reportList.appendChild(reportItem); }); reportModal.classList.add('show'); } generateReport.addEventListener('click', showReport); sendAllBtn.addEventListener('click', showReport); const closeModalFunc=() => { reportModal.classList.remove('show'); }; closeModal.addEventListener('click', closeModalFunc); cancelBtn.addEventListener('click', closeModalFunc); function getInventoryList() { let inventoryList=""; fruits.forEach(fruit => { const input=document.getElementById(`fruit-${fruit.id}`); let quantity='N/A'; if (input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { quantity=value===0?'0':(value===1?'1 box':`${value} boxes`); } } inventoryList += `${fruit.name}:${quantity}\n`; }); return inventoryList; } sendEmailBtn.addEventListener('click', (e) => { e.preventDefault(); if (emailForm.checkValidity()) { const email=document.getElementById('email').value; const subject=document.getElementById('subject').value; const message=document.getElementById('message').value; const inventoryList=getInventoryList(); const emailBody=encodeURIComponent( `${message}\n\n`+"FRUIT INVENTORY REPORT:\n"+"========================\n\n"+inventoryList ); const mailtoLink=`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${emailBody}`; notification.classList.add('show'); setTimeout(() => { notification.classList.remove('show'); }, 3000); window.location.href=mailtoLink; setTimeout(closeModalFunc, 500); } else { alert('Please enter a valid email address'); } }); reportModal.addEventListener('click', (e) => { if (e.target===reportModal) { closeModalFunc(); } }); }