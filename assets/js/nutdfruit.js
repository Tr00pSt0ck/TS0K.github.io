const firebaseConfig={ apiKey:"AIzaSyBRN5PnCCkUZwcIQcH7v6HiE3S2p474wN8", authDomain:"trst-7237c.firebaseapp.com", projectId:"trst-7237c", storageBucket:"trst-7237c.appspot.com", messagingSenderId:"170480411329", appId:"170480411329" }; firebase.initializeApp(firebaseConfig); const auth=firebase.auth(); const authLoading=document.getElementById('auth-loading'); auth.onAuthStateChanged((user) => { if (user) { authLoading.style.display='none'; document.querySelector('.container').style.display='block'; initApp(); } else { authLoading.querySelector('.auth-message').innerHTML='<div class="auth-error">Authentication required. Redirecting to login...</div>'; setTimeout(() => { window.location.href='index.html'; }, 2000); } }); function initApp() { const products=[ { id:1, name:"Chocolate Raisins", icon:"cookie-bite", description:"Sweet raisins coated in rich milk chocolate." }, { id:2, name:"Chocolate Peanuts", icon:"cookie-bite", description:"Crunchy peanuts covered in smooth chocolate." }, { id:3, name:"Chocolate Hazelnuts", icon:"cookie-bite", description:"Premium hazelnuts enrobed in dark chocolate." }, { id:4, name:"Cinna-Choco Almonds", icon:"cookie-bite", description:"Almonds coated in chocolate with a hint of cinnamon." }, { id:5, name:"Yoghurt Raisins", icon:"cookie-bite", description:"Raisins covered in a creamy yogurt coating." }, { id:6, name:"Medjool Dates (XL)", icon:"cookie-bite", description:"Extra large, naturally sweet Medjool dates." }, { id:7, name:"Dates (200g)", icon:"cookie-bite", description:"Sweet and chewy dates, perfect for snacking." }, { id:8, name:"Dried Plums", icon:"cookie-bite", description:"Naturally sweet and chewy dried plums." }, { id:9, name:"Almonds", icon:"cookie-bite", description:"Raw, unsalted almonds packed with nutrients." }, { id:10, name:"Cashews", icon:"cookie-bite", description:"Creamy cashews, lightly salted for perfect snacking." }, { id:11, name:"Pistachios", icon:"cookie-bite", description:"Shelled pistachios, lightly salted and roasted." }, { id:12, name:"Walnuts", icon:"cookie-bite", description:"Fresh, crunchy walnuts packed with omega-3." }, ]; const productList=document.getElementById('productList'); const reportModal=document.getElementById('reportModal'); const closeModal=document.getElementById('closeModal'); const cancelBtn=document.getElementById('cancelBtn'); const generateReport=document.getElementById('generateReport'); const sendEmailBtn=document.getElementById('sendEmailBtn'); const sendAllBtn=document.getElementById('sendAllBtn'); const reportList=document.getElementById('reportList'); const emailForm=document.getElementById('emailForm'); const searchInput=document.getElementById('searchInput'); const notification=document.getElementById('notification'); function renderProductList(productsArray=products) { productList.innerHTML=''; productsArray.forEach(product => { const productCard=document.createElement('div'); productCard.className='product-card'; productCard.innerHTML=`<div class="product-header"><h3 class="product-name"><i class="fas fa-${product.icon} product-icon"></i>${product.name}</h3><div class="product-id">ID:${product.id}</div></div><div class="product-info"><p class="product-description">${product.description}</p><div class="quantity-control"><span class="quantity-label">Amount:</span><input type="number" min="0" class="quantity-input" id="product-${product.id}" placeholder="Enter amount"></div></div>`; productList.appendChild(productCard); }); } renderProductList(); searchInput.addEventListener('input', (e) => { const searchTerm=e.target.value.toLowerCase(); const filteredProducts=products.filter(product => product.name.toLowerCase().includes(searchTerm)||product.description.toLowerCase().includes(searchTerm) ); renderProductList(filteredProducts); }); function showReport() { reportList.innerHTML=''; products.forEach(product => { const input=document.getElementById(`product-${product.id}`); let quantity='N/A'; let quantityClass=''; if (input&&input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { if (value===0) { quantity='0'; quantityClass='quantity-zero'; } else { quantity=value===1?'1 box':`${value} boxes`; } } } const reportItem=document.createElement('li'); reportItem.className='report-item'; reportItem.innerHTML=`<span class="report-product">${product.name}</span><span class="report-quantity ${quantityClass}">${quantity}</span>`; reportList.appendChild(reportItem); }); reportModal.classList.add('show'); } generateReport.addEventListener('click', showReport); sendAllBtn.addEventListener('click', showReport); const closeModalFunc=() => { reportModal.classList.remove('show'); }; closeModal.addEventListener('click', closeModalFunc); cancelBtn.addEventListener('click', closeModalFunc); function getInventoryList() { let inventoryList=""; products.forEach(product => { const input=document.getElementById(`product-${product.id}`); let quantity='N/A'; if (input&&input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { quantity=value===0?'0':(value===1?'1 box':`${value} boxes`); } } inventoryList += `${product.name}:${quantity}\n`; }); return inventoryList; } sendEmailBtn.addEventListener('click', (e) => { e.preventDefault(); if (emailForm.checkValidity()) { const email=document.getElementById('email').value; const subject=document.getElementById('subject').value; const message=document.getElementById('message').value; const inventoryList=getInventoryList(); const emailBody=encodeURIComponent( `${message}\n\n`+"NUTS&DRIED FRUITS INVENTORY REPORT:\n"+"===================================\n\n"+inventoryList ); const mailtoLink=`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${emailBody}`; notification.classList.add('show'); setTimeout(() => { notification.classList.remove('show'); }, 3000); window.location.href=mailtoLink; setTimeout(closeModalFunc, 500); } else { alert('Please enter a valid email address'); } }); reportModal.addEventListener('click', (e) => { if (e.target===reportModal) { closeModalFunc(); } }); }