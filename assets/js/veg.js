const firebaseConfig={ apiKey:"AIzaSyBRN5PnCCkUZwcIQcH7v6HiE3S2p474wN8", authDomain:"trst-7237c.firebaseapp.com", projectId:"trst-7237c", storageBucket:"trst-7237c.appspot.com", messagingSenderId:"170480411329", appId:"170480411329" }; firebase.initializeApp(firebaseConfig); const auth=firebase.auth(); const authLoading=document.getElementById('auth-loading'); auth.onAuthStateChanged((user) => { if (user) { authLoading.style.display='none'; document.querySelector('.container').style.display='block'; initApp(); } else { authLoading.querySelector('.auth-message').innerHTML='<div class="auth-error">Authentication required. Redirecting to login...</div>'; setTimeout(() => { window.location.href='index.html'; }, 2000); } }); function initApp() { const vegetables=[ { id:1, name:"Carrot", icon:"carrot", description:"Sweet and crunchy root vegetable, rich in beta-carotene." }, { id:2, name:"Broccoli", icon:"broccoli", description:"Nutrient-rich green vegetable, excellent steamed or roasted." }, { id:3, name:"Potato", icon:"seedling", description:"Versatile starchy tuber, great for baking, frying, and mashing." }, { id:4, name:"Tomato", icon:"apple-alt", description:"Juicy and flavorful, technically a fruit but used as a vegetable." }, { id:5, name:"Cucumber", icon:"leaf", description:"Refreshing and hydrating, perfect for salads and pickling." }, { id:6, name:"Spinach", icon:"leaf", description:"Nutrient-packed leafy green, great raw or cooked." }, { id:7, name:"Bell Pepper", icon:"pepper-hot", description:"Sweet and colorful, available in red, yellow, and green." }, { id:8, name:"Onion", icon:"layer-group", description:"Essential aromatic vegetable, base for many dishes." }, { id:9, name:"Garlic", icon:"clone", description:"Pungent and flavorful, used for seasoning in countless recipes." }, { id:10, name:"Lettuce", icon:"leaf", description:"Crisp leafy green, perfect for salads and sandwiches." }, { id:11, name:"Cauliflower", icon:"seedling", description:"Versatile vegetable, can be roasted, mashed, or made into rice." }, { id:12, name:"Eggplant", icon:"circle", description:"Meaty texture, excellent for grilling, roasting, and in curries." }, { id:13, name:"Zucchini", icon:"leaf", description:"Mild summer squash, great grilled, sautÃ©ed, or in bread." }, { id:14, name:"Cabbage", icon:"layer-group", description:"Crunchy and nutritious, perfect for slaws, stir-fries, and soups." }, { id:15, name:"Pumpkin", icon:"circle", description:"Sweet and versatile, great for pies, soups, and roasting." }, { id:16, name:"Radish", icon:"seedling", description:"Peppery and crisp, adds crunch to salads and sandwiches." } ]; const vegList=document.getElementById('vegList'); const reportModal=document.getElementById('reportModal'); const closeModal=document.getElementById('closeModal'); const cancelBtn=document.getElementById('cancelBtn'); const generateReport=document.getElementById('generateReport'); const sendEmailBtn=document.getElementById('sendEmailBtn'); const sendAllBtn=document.getElementById('sendAllBtn'); const reportList=document.getElementById('reportList'); const emailForm=document.getElementById('emailForm'); const searchInput=document.getElementById('searchInput'); const notification=document.getElementById('notification'); function renderVegList(vegArray=vegetables) { vegList.innerHTML=''; vegArray.forEach(veg => { const vegCard=document.createElement('div'); vegCard.className='veg-card'; vegCard.innerHTML=`<div class="veg-header"><h3 class="veg-name"><i class="fas fa-${veg.icon} veg-icon"></i>${veg.name}</h3><div class="veg-id">ID:${veg.id}</div></div><div class="veg-info"><p class="veg-description">${veg.description}</p><div class="quantity-control"><span class="quantity-label">Amount:</span><input type="number" min="0" class="quantity-input" id="veg-${veg.id}" placeholder="Enter amount"></div></div>`; vegList.appendChild(vegCard); }); } renderVegList(); searchInput.addEventListener('input', (e) => { const searchTerm=e.target.value.toLowerCase(); const filteredVeg=vegetables.filter(veg => veg.name.toLowerCase().includes(searchTerm)||veg.description.toLowerCase().includes(searchTerm) ); renderVegList(filteredVeg); }); function showReport() { reportList.innerHTML=''; vegetables.forEach(veg => { const input=document.getElementById(`veg-${veg.id}`); let quantity='N/A'; let quantityClass=''; if (input&&input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { if (value===0) { quantity='0'; quantityClass='quantity-zero'; } else { quantity=value===1?'1 box':`${value} boxes`; } } } const reportItem=document.createElement('li'); reportItem.className='report-item'; reportItem.innerHTML=`<span class="report-veg">${veg.name}</span><span class="report-quantity ${quantityClass}">${quantity}</span>`; reportList.appendChild(reportItem); }); reportModal.classList.add('show'); } generateReport.addEventListener('click', showReport); sendAllBtn.addEventListener('click', showReport); const closeModalFunc=() => { reportModal.classList.remove('show'); }; closeModal.addEventListener('click', closeModalFunc); cancelBtn.addEventListener('click', closeModalFunc); function getInventoryList() { let inventoryList=""; vegetables.forEach(veg => { const input=document.getElementById(`veg-${veg.id}`); let quantity='N/A'; if (input&&input.value.trim()!=='') { const value=parseInt(input.value); if (!isNaN(value)) { quantity=value===0?'0':(value===1?'1 box':`${value} boxes`); } } inventoryList += `${veg.name}:${quantity}\n`; }); return inventoryList; } sendEmailBtn.addEventListener('click', (e) => { e.preventDefault(); if (emailForm.checkValidity()) { const email=document.getElementById('email').value; const subject=document.getElementById('subject').value; const message=document.getElementById('message').value; const inventoryList=getInventoryList(); const emailBody=encodeURIComponent( `${message}\n\n`+"VEGETABLE INVENTORY REPORT:\n"+"===========================\n\n"+inventoryList ); const mailtoLink=`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${emailBody}`; notification.classList.add('show'); setTimeout(() => { notification.classList.remove('show'); }, 3000); window.location.href=mailtoLink; setTimeout(closeModalFunc, 500); } else { alert('Please enter a valid email address'); } }); reportModal.addEventListener('click', (e) => { if (e.target===reportModal) { closeModalFunc(); } }); }